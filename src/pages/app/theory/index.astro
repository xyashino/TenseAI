---
import AppLayout from "@/layouts/AppLayout.astro";
import { TenseCard } from "@/components/theory/tense-card";
import { getCollection } from "astro:content";
import { getTenseIcon } from "@/lib/theory-utils";
import type { TenseCardData } from "@/types";

// Load theory entries from content collection
const theoryEntries = await getCollection("theory");

// Map entries to TenseCardData and sort by order
const tenseData: TenseCardData[] = theoryEntries
  .sort((a, b) => a.data.order - b.data.order)
  .map((entry) => ({
    name: entry.data.tense,
    slug: entry.slug,
    description: entry.data.description,
    icon: getTenseIcon(entry.data.tense),
  }));
---

<AppLayout title="Theory - TenseAI">
  <div class="-mx-6 lg:-mx-8 px-6 lg:px-8">
    <div class="mx-auto max-w-7xl">
      <header class="mb-12">
        <h1 class="text-4xl font-bold tracking-tight text-foreground">Theory</h1>
        <p class="mt-2 text-muted-foreground">Master grammar concepts at your own pace.</p>
      </header>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-8">
        {
          tenseData.map((tense) => (
            <TenseCard
              name={tense.name}
              slug={tense.slug}
              description={tense.description}
              icon={tense.icon}
              client:load
            />
          ))
        }
      </div>
    </div>
  </div>
</AppLayout>
