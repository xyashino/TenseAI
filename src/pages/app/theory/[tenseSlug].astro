---
import TheoryContent from "@/components/theory/theory-content.astro";
import { Button } from "@/components/ui/button";
import AppLayout from "@/layouts/app-layout.astro";
import { NavigationRoutes } from "@/lib/enums/navigation";
import { getCollection } from "astro:content";
import { ArrowLeft } from "lucide-react";
const { tenseSlug } = Astro.params;

const theoryEntries = await getCollection("theory");

const entry = theoryEntries.find((e) => e.slug === tenseSlug);

if (!entry) {
  return Astro.redirect(NavigationRoutes.THEORY);
}

const { Content } = await entry.render();
const { title, description } = entry.data;
---

<AppLayout title={`${title} - Theory - TenseAI`}>
  <header class="mb-8">
    <h1 class="text-4xl font-bold tracking-tight text-foreground mb-3">{title}</h1>
    <p class="text-lg text-muted-foreground">{description}</p>
  </header>

  <TheoryContent>
    <Content />
  </TheoryContent>

  <footer class="mt-12 pt-6 border-t">
    <a href={NavigationRoutes.THEORY}>
      <Button variant="link" className="flex flex-row items-center gap-2">
        <ArrowLeft className="size-4" />
        <p>Back to Theory</p>
      </Button>
    </a>
  </footer>
</AppLayout>
